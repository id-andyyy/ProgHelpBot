![Арт](https://i.postimg.cc/05Mg33FL/art.png)

![GitHub Created At](https://img.shields.io/github/created-at/id-andyyy/Musical-Studying?style=flat&color=70F34A)
![Top Language](https://img.shields.io/github/languages/top/id-andyyy/Musical-Studying?style=flat&color=black)
![Pet Project](https://img.shields.io/badge/pet-project-8400FF)

# ProgHelpBot&nbsp;&#128104;&#8205;&#128187;

Телеграм-бот шпаргалка по синтаксису языка Python. Создан в рамках школьного проекта&nbsp;&#127891;.

## Функциональность

Телеграм-бот, представляющий собой базу знаний. Пользователи могут просматривать статьи по разделам и осуществлять поиск по ключевым словам&nbsp;&#128270;. Администраторы могут управлять контентом: добавлять новые статьи. Бот спроектирован для предоставления структурированной информации и быстрого доступа к ней&nbsp;&#128451;. Список всех статей можно получить по [ссылке](https://telegra.ph/python-articles-04-06-2).

### Пользовательские команды

- &#127937;&nbsp;`/start` - приветственное сообщение
- &#10067;&nbsp;`/help` - справка по использованию бота
- &#128218;&nbsp;`/articles` - просмотр всех опубликованных статей, сгруппированных по разделам
- &#128270;&nbsp;`/search` - инструкция по поиску
- &#128232;&nbsp;`/report`, `/feedback` - команды для обратной связи
- &#128100;&nbsp;`/creator` - информация о создателе
- &#128270;&nbsp;`любой текстовый ввод` - бот воспринимает как поисковый запрос и ищет релевантные статьи

### Админские команды

- &#128221;&nbsp;`/addarticle` - запуск процесса добавления новой статьи через пошаговый диалог (FSM)
- &#128196;&nbsp;`/allarticles` - просмотр всех статей, включая неопубликованные
- &#10060;&nbsp;`/cancel` - отмена текущего действия (например, добавления статьи)

## Скриншоты

![Начало работы](https://i.postimg.cc/3RGRcqQv/1.png)
![Поиск](https://i.postimg.cc/nLc70wb2/2.png)
![Добавление статей](https://i.postimg.cc/CLTqWKpz/3.png)

## Технологии и инструменты

![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffffff)
![aiogram](https://img.shields.io/badge/aiogram-005571?style=for-the-badge&color=019cfb)
![SQLite](https://img.shields.io/badge/sqlite-%2307405e.svg?style=for-the-badge&logo=sqlite&logoColor=white)
![nltk](https://img.shields.io/badge/nltk-85C1E9?style=for-the-badge&color=85C1E9)
![fuzzywuzzy](https://img.shields.io/badge/fuzzywuzzy-FF5733?style=for-the-badge&color=FF5733)
![Telegraph](https://img.shields.io/badge/telegraph-2A5DB0?style=for-the-badge&color=2A5DB0)


- **Язык программирования**: Python 3
- **Фреймворк для Telegram Bot API**: `aiogram` 3.8.0
- **База данных**: `SQLite`
- **Управление зависимостями**: `pip` и `requirements.txt`
- **Обработка естественного языка (NLP)**:
    - `nltk` (SnowballStemmer) для стемминга (приведения слов к основе) на русском языке.
    - `fuzzywuzzy` и `python-Levenshtein` для нечеткого поиска по ключевым словам.
- **Управление конфигурацией**: `environs` для загрузки настроек из `.env` файла.

## Принятые технические решения

- **Модульная архитектура**: Проект разделен на логические компоненты (`handlers`, `services`, `database`, `keyboards`, `lexicon`, `states`, `config_data`), что упрощает его поддержку и развитие.
- **Использование Router'ов**: `aiogram.Router` используется для разделения обработчиков на пользовательские и админские.
- **Машина состояний (FSM)**: Для процесса добавления статьи используется механизм конечных автоматов (`aiogram.fsm`), что позволяет вести пользователя по шагам.
- **Вынесение текстов в "лексикон"**: Все текстовые сообщения бота хранятся в отдельных файлах в директории `lexicon`. Это упрощает управление текстами и потенциальную локализацию.
- **Разделение прав доступа**: Четкое разграничение функциональности для обычных пользователей и администраторов. Доступ к админским командам проверяется с помощью кастомного фильтра `IsAdmin`.
- **Интеллектуальный поиск**: Поисковый механизм использует стемминг для нормализации запроса и ключевых слов, а также нечеткое сравнение строк для нахождения релевантных совпадений, что повышает качество поиска.
- **Хранение конфигурации**: Чувствительные данные (токен бота, ID администраторов) и настройки (имя файла БД) хранятся в файле `.env` и не попадают в систему контроля версий.
- **Статьи**: Сами статьи написаны на платформе Telegraph. Получить статьи списком можно [здесь](https://telegra.ph/python-articles-04-06-2).

## Начало работы

1.  **Склонируйте репозиторий**:
    ```bash
    git clone https://github.com/id-andyyy/ProgHelpBot.git
    cd ProgHelpBot
    ```
2.  **Создайте и активируйте виртуальное окружение**:
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # Для Windows: .venv\Scripts\activate
    ```
3.  **Установите зависимости**:
    ```bash
    pip install -r requirements.txt
    ```
4.  **Создайте файл конфигурации `.env`** в корневой директории проекта и добавьте в него следующие переменные:
    ```env
    BOT_TOKEN=ВАШ_ТОКЕН_БОТА
    ADMIN_IDS=ID_АДМИНА_1,ID_АДМИНА_2
    DATABASE=proghelpbot.db
    ```
    - `BOT_TOKEN`: токен вашего телеграм-бота.
    - `ADMIN_IDS`: ID администраторов через запятую.
    - `DATABASE`: имя файла базы данных SQLite.

5.  **Запустите бота**:
    ```bash
    python bot.py
    ```

## Структура проекта

```
.
├── config_data/
│   └── config.py           # Загрузка и обработка конфигурации из .env
│
├── database/
│   └── sqlite.py           # Функции для взаимодействия с SQLite (создание таблиц, CRUD-операции)
│
├── filters/
│   └── is_admin.py         # Фильтр для проверки, является ли пользователь администратором
│
├── handlers/
│   ├── admin_handlers.py   # Обработчики для администраторов
│   └── user_handlers.py    # Обработчики для обычных пользователей
│
├── keyboards/
│   ├── admin_keyboard.py   # Клавиатуры для админского меню
│   └── set_menu.py         # Установка кнопок меню бота
│
├── lexicon/
│   ├── admin_lexicon.py    # Тексты для админских команд
│   ├── other_lexicon.py    # Прочие общие тексты
│   └── user_lexicon.py     # Тексты для пользовательских команд
│
├── services/
│   └── services.py         # Основные функции обработки данных, поиска статей и т.д.
│
├── states/
│   └── admin_states.py     # Состояния для админских сценариев (добавление статьи)
│
├── .env                    # Файл конфигурации (нужно создать вручную)
├── .env.example            # Пример содержимого .env
├── .gitignore              # Файл для исключения файлов и папок из Git
├── bot.py                  # Главный файл для запуска бота, точка входа в приложение
└── requirements.txt        # Список зависимостей проекта
```

## Обратная связь

Буду признателен, если вы поставите звезду&nbsp;&#11088;. Если вы нашли баг или у вас есть предложения по улучшению,
используйте раздел [Issues](https://github.com/id-andyyy/ProgHelpBot/issues).

Read in [English&nbsp;&#127468;&#127463;](README-en.md)
